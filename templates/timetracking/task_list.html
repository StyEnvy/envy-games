{% extends "base.html" %}
{% block title %}Tasks â€” {{ project.title }}{% endblock %}
{% block content %}
<div class="max-w-5xl mx-auto">
    <div class="breadcrumbs text-sm mb-4">
        <ul>
            <li><a href="{% url 'timetracking:project_list' %}">Projects</a></li>
            <li>{{ project.title }}</li>
            <li>Tasks</li>
        </ul>
    </div>
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <div class="flex items-center justify-between mb-4">
                <h2 class="card-title">Tasks for {{ project.title }}</h2>
                <form method="post" class="flex gap-2">{% csrf_token %}
                    {{ form.project.as_hidden }}
                    <input type="text" name="title" placeholder="New task title" class="input input-bordered" required>
                    <button class="btn btn-primary" type="submit">Add</button>
                </form>
            </div>
            <form method="get" class="mb-4"><input class="input input-bordered" type="text" name="q"
                    placeholder="Search" value="{{ request.GET.q }}"> <button class="btn">Filter</button></form>
            <div class="overflow-x-auto">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Active</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for t in tasks %}
                        <tr>
                            <td class="font-medium">{{ t.title }}</td>
                            <td>{% if t.is_active %}<span class="badge badge-success">Active</span>{% else %}<span
                                    class="badge">Inactive</span>{% endif %}</td>
                            <td class="text-right"><a class="btn btn-sm btn-ghost"
                                    href="{% url 'timetracking:task_edit' t.id %}">Edit</a></td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="3" class="opacity-70">No tasks yet.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}