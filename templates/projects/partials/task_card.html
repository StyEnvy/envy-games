<div class="card bg-base-100 shadow hover:shadow-lg transition-shadow cursor-pointer" data-task-id="{{ task.id }}"
    hx-get="{% url 'projects:task_modal' task.id %}" hx-target="#task-modal-container" hx-trigger="click">
    <div class="card-body p-3">
        <div class="flex justify-between items-start mb-2">
            <span class="badge badge-sm 
                {% if task.task_type == 'feature' %}badge-success{% endif %}
                {% if task.task_type == 'bug' %}badge-error{% endif %}
                {% if task.task_type == 'task' %}badge-info{% endif %}
                {% if task.task_type == 'idea' %}badge-warning{% endif %}">
                {{ task.get_task_type_display }}
            </span>
            <span class="badge badge-sm badge-outline
                {% if task.priority == 'high' %}badge-error{% endif %}
                {% if task.priority == 'medium' %}badge-warning{% endif %}
                {% if task.priority == 'low' %}badge-success{% endif %}">
                {{ task.get_priority_display }}
            </span>
        </div>

        <h4 class="font-medium text-sm">{{ task.title }}</h4>

        <div class="flex justify-between items-center mt-2">
            <div class="flex items-center gap-2">
                {% if task.assignee %}
                <div class="avatar">
                    <div class="w-6 h-6 rounded-full bg-primary text-primary-content grid place-items-center text-xs">
                        {{ task.assignee.username|first|upper }}
                    </div>
                </div>
                {% endif %}

                {% if task.attachments.count > 0 %}
                <span class="badge badge-sm badge-ghost">📎 {{ task.attachments.count }}</span>
                {% endif %}
            </div>
        </div>
    </div>
</div>